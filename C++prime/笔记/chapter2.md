# 变量和基本类型
> 字节定义
> : 计算机中可寻址的最小内存块。通常计算机的字节为8bit。      

> 字的定义
> : 计算机中储存的基本单位是字。通常为计算机的一个字为32bit/64bit，对应为4字节/8字节


> 为了赋予内存中某个地址明确的含义，必须首先知道存储在该地址的数据的类型。如知道位置736424处为float类型
> * 类型决定从该地址开始占用的比特数。从位置736424开始的32个bit表示float内容。因为标准规定float类型占32个bit。
> * 类型决定了如何解释这些比特的内容。float变量实际存储的值依赖于该机器是如何存储浮点数的。
## 基本内置类型

### 算术类型

* 整型
    * 整数型
        * (unsigned)short 标准规定最小16bit 实际编译器规定为16bit
        * (unsigned)int 标准规定最小16bit 实际编译器规定为32bit
        * (unsigned)long 标准规定最小32bit 实际编译器规定为32bit
        * (unsigned)long long 标准规定最小64bit 实际编译器规定为64bit
    * 字符型
        * char:最少8bit，存放机器基本字符集
            * unsigned char
            * signed char
            * char
        >  字符型实际表示形式只有2种，无符号和有符号。char的具体表示类型由编译器决定。表现为以上二者之一：在一些机器上char类型为unsigned char,在其他机器上可能表现为signed char
        * wchar_t：最少16bit，存放机器最大扩展字符集
        * char16_t：最少16bit，为Unicode字符集服务，所有自然语言的标准
        * char32_t：最少32bit，为Unicode字符集服务，所有自然语言的标准
    * 布尔型：true/false
* 浮点型：C++标准规定了浮点数的有效位数的最小值，然后大多数编译器实现了更高的精度
    * float：占用32个bit，标准规定最少有效位是6位，实际一般编译器实现了7个有效位
    * double：占用64个bit，标准规定最少有效位是10位，实际一般编译器实现了16个有效位
    * long double:  ~~被用于有特殊浮点数需求的硬件~~

* **选择数据类型的几点经验**
    1. 明知道数值不为负数，选无符号类型
    2. 通常情况下用int执行整数运算。short太小，long一般和int大小相同
    3. 数值范围超过了int表示，则选用long long表示
    4. 算术表达式不要用bool或者char类型表示整数。
        * 因为你不知道机器上的char属于unsigned还是signed
        * bool在算术表达式中非0即1
    5. 如果需要使用一个不大的整数。可以明确指明类型为unsigned char或者signed char
    6. 浮点数计算优先使用double
        * float精度比double小
        * double计算代价稍微大，但是相差无几（计算量大的运算还是要考虑计算代价）
    7. long double提供的精度一般情况下用不到，并且运行时消耗比较大，不可忽略。

### 类型转换

* 转换规则
    1. 非bool->bool类型：初始值为0则结果为false，否则结果为true
    2. bool->非bool：初始值为false结果为0，初始值为true结果为1
    3. 浮点数->整数：进行近似处理
    4. 整数->浮点数：小数部分记为0
    5. 无符号->有符号类型 `unsigned char c = -1` 结果c为255
    6. 有符号->无符号类型 `signed char c1 = 256` 结果未定义

* 转换场景
    * 一种类型赋值给另外一种类型的变量 `bool b = 42;`
    * 某处使用某种类型，实际需要另外一种类型。如if条件语句
    ```C++
    int i = 42;
    if(i)
        i = 0;
    ```
    * 表达式自动转换 
    ```C++
    unsigned u  = 10;
    int i = -42;
    std::cout << u + i << std::endl;
    ```
    > 表达式里面同时出现符号类型和无符号类型，带符号类型自动转换成无符号类型。



### 字面值常量
> * 字面值的形式和值大小决定了字面值具体的数据类型
> * 如果指定字面值的类型，字面值有默认的数据类型
> * 我们可以通过指定前缀和后缀改变字面值的默认数据类型

* 整型字面值
    * 形式
        * 20 十进制
        * 024 八进制
        * 0x14 十六进制
    * 类别判断
        * 十进制
            * 默认是有符号数
            * 默认取int/long/long long中尺寸最小的，前提是可以容纳当前的值
        * 八进制/十六进制
            * 默认取int/unsigned int/long/unsigned long/long long/unsigned long long 前提是能过容纳当前的值
    * 没有整型字面值的数据类型会是short：
        * `short s = 2;`要进行类型转换
        * 2的字面值类型是int，而s变量类型为short
* 浮点数字面值
    * 形式
        * 3.1415926
        * 3.14E0
        * 0e0
        * .001
    * 浮点数字面值默认数据类型为double
* 字符字面值 ` 'a' ` 字面值类型默认是char类型
* 字符串字面值 ` "abcdefg" `
> 1. 实际上常量字符构成的数组，结尾处添加空字符'\0'，实际长度比它的内容多1
> 2. 两个字符串字面值位置紧邻，且仅仅由空格、锁进、换行符分割，则它们实际上是一个整体
```C++
std::cout << "a really, really long string literal "
"that spans two lines" << std::endl;
```
* 转义字符序列
    * 不可打印字符，无法显示出来
        * 换行\n
        * 制表符\t
    * 在C++中有特殊语义，如果不转义会起冲突。
        * \" 双引号在C++中字符串字面值中
        * \' 单引号用在字符中
        * \\ 斜杠
    * 泛化的转义字符序列:数字部分对应字符的数值
        * \x+十六进制数：\x4d->'M'
        * \ +八进制数： \115->'M' \0->null
    > 不仅仅可以表示**不可打印字符**和**已在C++中存在的特殊语义字符**，还可以表示普通的字符。


* 指定字面值类型
    * 前缀-用于指定字符和字符串字面值
        * u char16_t
        * U char32_t
        * L wchar_t
        * u8 char
    * 后缀-指定算术类型
        * u/U unsigned
        * l/L long
        * ll/LL long long
        * f/F Float
        * l/L long double

* 布尔字面值 ture/false
* 指针字面值 nullptr


## 变量

### 变量的定义

* 变量定义：类型说明符，紧跟一个多个变量名组成的列表，变量名以逗号隔开，最后以分号结束

* 初始化和赋值区别：   
    * 初始化：创建变量赋予一个初始值
    * 赋值：擦去旧的值，用新的值代替

* 显示初始化：创建时获得了特定的值
    * 拷贝初始化：编译器把等号右边的初始值拷贝到新建的对象中
    * 直接初始化：不使用等号

* 涉及容器元素序列（vector对象）的初始化：即不仅仅包含一个值，多个值序列。
    * 值初始化：只提供容器容纳的数量而不提供初始值，这个时候库会创建值初始化的初值，赋予容器中的元素
        * 属于直接初始化，不能用等号
        * 取决于元素的类型
            * 内置类型：自动设为0
            * 类类型：默认初始化的值。
        * **此时如果类不支持默认初始化，则无法值初始化**
        * 只提供数量不提供初始值，则只能使用直接初始化的方式，因此不能有等号
    * 列表初始化：
        * 既可以使用等号，也可以不使用等号
        * 既可以用来初始化，也可以用来赋值
        * 当用于内置类型并且有丢失信息的风险，编译器会报错
        ```C++
        long double  ld = 3.1415926;
        int a{ld},b = {ld};// 编译器报错
        ```
        * 和圆括号区别：
            * 圆括号优先构造初始化
            * 花括号优先列表初始化，如果实在无法列表初始化（列表内元素类型不同）则尝试使用列表构造对象

* 默认初始化：未显示初始化，创建时不提供初始值
如果定义变量时，没有指定初值，那么变量被默认初始化，变量被赋予默认值
* 默认值取决于变量类型和定义变量的位置
    * 内置类型
        * 定义于任何函数之外的话：初始化为0
        * 定义在函数体内的变量将**不被初始化**，此时值是未定义的
    * 类类型：自己决定初始化对象的方式
        * 大多数支持无须显式初始化定义对象，为其提供默认值 e.g. `string empty;`
        * 少数类要求必须显式初始化，否则引发错误



### 变量声明和定义的关系

* Question：变量的声明和定义明明差不多，为什么要区分开来？？
* Answer：C++采用分离式编译，源文件可以分在多个cpp文件中。文件间需要共享代码，如果想使用定义在其他文件的变量，必须事先包含那个变量的声明，而不可能重新定义一个相同的变量。所以才区分声明和定义

* 声明和定义的区别；
    * 声明：
        * 规定了类型和变量名
        * 如果该变量被定义在外面的文件，加关键字extern
        * 可以被多次声明
    * 定义：
        * 也规定了类型和变量名
        * 申请内存空间
        * 给变量赋初始值


